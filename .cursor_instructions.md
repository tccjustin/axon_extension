# Axon Extension ê°œë°œ ì§€ì¹¨

## âš ï¸ ğŸš¨ **ë§¤ìš° ì¤‘ìš”: ì‹¤í–‰ í™˜ê²½** ğŸš¨ âš ï¸

### **ì´ Extensionì€ ê¸°ë³¸ì ìœ¼ë¡œ ì›ê²© ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤!**

#### ì‹¤í–‰ í™˜ê²½ êµ¬ë¶„:
- âœ… **ì›ê²© ë¦¬ëˆ…ìŠ¤ (WSL/SSH)**: ëª¨ë“  ê¸°ëŠ¥ (FWDN ì œì™¸)
  - Yocto ë¹Œë“œ
  - MCU ë¹Œë“œ  
  - autolinux ìŠ¤í¬ë¦½íŠ¸
  - Git ì‘ì—…
  - ëª¨ë“  íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—…
  
- âš ï¸ **ë¡œì»¬ Windows**: **ì˜¤ì§ FWDN ì‹¤í–‰(fwdn.exe)ë§Œ!**

#### ë”°ë¼ì„œ:
1. **ê²½ë¡œ ì²˜ë¦¬**: í•­ìƒ `vscode.Uri` ì‚¬ìš©, `fs`/`path` ëª¨ë“ˆ ì‚¬ìš© ê¸ˆì§€
2. **íŒŒì¼ ì‘ì—…**: `vscode.workspace.fs` API ì‚¬ìš©
3. **ëª…ë ¹ì–´ ì‹¤í–‰**: bash ì‰˜, Unix ê²½ë¡œ í˜•ì‹ ì‚¬ìš©

---

## ğŸ“ ì¤‘ìš”: êµ¬í˜„ ì™„ë£Œ ì‹œ
**êµ¬í˜„ëœ ì‚¬í•­ì€ ë°˜ë“œì‹œ `êµ¬í˜„ì‚¬í•­.md` íŒŒì¼ì— ê¸°ì…í•´ì•¼ í•©ë‹ˆë‹¤.**

---

## ğŸ¯ ê°œë°œ ì›ì¹™

### 1. Python í˜¸í™˜ì„± (ì¤‘ìš”!)

**ì„œë²„ í™˜ê²½: Python 3.6.15**

#### âŒ ê¸ˆì§€ ì‚¬í•­
```python
# Python 3.7+ ê¸°ëŠ¥ ì‚¬ìš© ê¸ˆì§€
subprocess.run(capture_output=True)  # âŒ
subprocess.run(text=True)            # âŒ
```

#### âœ… ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë°©ë²•
```python
# Python 3.6 í˜¸í™˜
subprocess.run(stdout=subprocess.PIPE, stderr=subprocess.PIPE)  # âœ…
subprocess.run(universal_newlines=True)                          # âœ…
```

#### âœ… ì‚¬ìš© ê°€ëŠ¥
```python
f"string {variable}"  # f-stringì€ Python 3.6ë¶€í„° ì§€ì›
```

---

### 2. ì›ê²© í™˜ê²½ ì½”ë”© ê·œì¹™ (ë§¤ìš° ì¤‘ìš”!)

#### âŒ ì ˆëŒ€ ê¸ˆì§€
```typescript
// Node.js íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë“ˆ ì‚¬ìš© ê¸ˆì§€
const fs = require('fs');
const path = require('path');
fs.readFile('/path/to/file');  // âŒ

// file:// scheme ê°•ì œ ì‚¬ìš© ê¸ˆì§€
vscode.Uri.file(somePath);  // âŒ ë¡œì»¬ë§Œ ì§€ì›
```

#### âœ… ë°˜ë“œì‹œ ì‚¬ìš©
```typescript
// VSCode API ì‚¬ìš©
import * as vscode from 'vscode';

// íŒŒì¼ ì½ê¸°
const uri = vscode.Uri.joinPath(baseUri, 'subfolder', 'file.txt');
const content = await vscode.workspace.fs.readFile(uri);

// ë””ë ‰í† ë¦¬ ì½ê¸°
const files = await vscode.workspace.fs.readDirectory(uri);

// íŒŒì¼ ì“°ê¸°
await vscode.workspace.fs.writeFile(uri, Buffer.from(content));

// ê²½ë¡œ ì¡°í•© (scheme ìœ ì§€)
const newUri = vscode.Uri.joinPath(projectUri, 'build', 'output');
```

#### ê²½ë¡œ ë³€í™˜
```typescript
// URIì—ì„œ ê²½ë¡œ ë¬¸ìì—´ ì¶”ì¶œ
const pathStr = uri.scheme === 'file' ? uri.fsPath : uri.path;

// ë¬¸ìì—´ì—ì„œ URI ìƒì„± (ì›ê²© ì§€ì›)
const uri = typeof path === 'string' && path.includes('://')
    ? vscode.Uri.parse(path)
    : vscode.Uri.file(path);
```

#### ëª…ë ¹ì–´ ì‹¤í–‰
```typescript
// í•­ìƒ bash ì‰˜, Unix ê²½ë¡œ í˜•ì‹
await executeShellTask({
    command: `cd /path/to/project && ./script.sh`,
    cwd: projectPath,
    taskName: 'Task Name',
    taskId: 'taskId',
    showTerminal: true
});
```

---

### 3. íŒŒì¼ êµ¬ì¡° ê·œì¹™

#### í”„ë¡œì íŠ¸ë³„ ëª¨ë“ˆí™”
```
src/
â”œâ”€â”€ projects/
â”‚   â”œâ”€â”€ common/              # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ shell-utils.ts   # ì‰˜ ëª…ë ¹ ì‹¤í–‰
â”‚   â”‚   â”œâ”€â”€ types.ts         # ê³µí†µ íƒ€ì…
â”‚   â”‚   â””â”€â”€ vscode-utils.ts  # VSCode API ìœ í‹¸
â”‚   â”œâ”€â”€ mcu/                 # MCU í”„ë¡œì íŠ¸
â”‚   â”‚   â”œâ”€â”€ builder.ts       # ë¹Œë“œ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ creator.ts       # í”„ë¡œì íŠ¸ ìƒì„±
â”‚   â”‚   â””â”€â”€ dialog.ts        # WebView ë‹¤ì´ì–¼ë¡œê·¸
â”‚   â””â”€â”€ yocto/               # Yocto í”„ë¡œì íŠ¸
â”‚       â”œâ”€â”€ builder.ts
â”‚       â”œâ”€â”€ creator.ts
â”‚       â”œâ”€â”€ dialog.ts
â”‚       â”œâ”€â”€ devtool.ts
â”‚       â”œâ”€â”€ autolinux-creator.ts
â”‚       â””â”€â”€ autolinux-dialog.ts
```

---

### 4. WebView ê°œë°œ ê·œì¹™

#### íŒŒì¼ ëª…ëª… ê·œì¹™
```
<feature>-dialog.html
<feature>-dialog.css
<feature>-dialog.js
```

#### WebView êµ¬ì¡°
```typescript
export class FeatureDialog {
    private webview?: vscode.WebviewPanel;
    private rawHtml?: string;  // ìºì‹±
    private rawCss?: string;
    private rawJs?: string;

    constructor(private context: vscode.ExtensionContext) {
        this.preloadAssets();  // ì„ ë¡œë”©
    }

    private async preloadAssets(): Promise<void> {
        // ë°±ê·¸ë¼ìš´ë“œì—ì„œ íŒŒì¼ ë¡œë“œ
    }

    async showDialog(): Promise<void> {
        // WebView íŒ¨ë„ ìƒì„±
        // HTML ìƒì„± ë° ì„¤ì •
        // ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    }

    private async handleWebViewMessage(message: any, panel: vscode.WebviewPanel): Promise<void> {
        // ë©”ì‹œì§€ í•¸ë“¤ë§
    }
}
```

#### HTML í…œí”Œë¦¿
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!--CSP-->  <!-- Content Security Policy í”Œë ˆì´ìŠ¤í™€ë” -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialog Title</title>
    <!--CSS_INLINE-->  <!-- CSS ì¸ë¼ì¸ í”Œë ˆì´ìŠ¤í™€ë” -->
</head>
<body>
    <div class="container" id="app">
        <!-- UI ë‚´ìš© -->
    </div>
    <!--JS_INLINE-->  <!-- JS ì¸ë¼ì¸ í”Œë ˆì´ìŠ¤í™€ë” -->
</body>
</html>
```

#### JavaScript íŒ¨í„´
```javascript
const vscode = acquireVsCodeApi();

// ìƒíƒœ ê´€ë¦¬
let state = {
    // ìƒíƒœ ë³€ìˆ˜ë“¤
};

// DOM ìš”ì†Œ ì°¸ì¡°
let element1, element2;

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', () => {
    initializeUI();
});

function initializeUI() {
    // DOM ìš”ì†Œ ì°¸ì¡° ì„¤ì •
    element1 = document.getElementById('element1');
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    setupEventListeners();
}

function setupEventListeners() {
    element1.onclick = () => {
        vscode.postMessage({
            command: 'actionName',
            data: { /* ... */ }
        });
    };
}

// ë©”ì‹œì§€ ìˆ˜ì‹ 
window.addEventListener('message', e => {
    const msg = e.data;
    if (msg.command === 'updateData') {
        // ë°ì´í„° ì—…ë°ì´íŠ¸
    }
});
```

---

### 5. Creator í´ë˜ìŠ¤ íŒ¨í„´

```typescript
export interface ProjectData {
    projectName: string;
    projectUri: vscode.Uri;
    // ì¶”ê°€ ë°ì´í„°...
}

export class ProjectCreator {
    /**
     * í”„ë¡œì íŠ¸ ìƒì„± ë©”ì¸ í•¨ìˆ˜
     */
    static async createProject(data: ProjectData): Promise<void> {
        // 1. í”„ë¡œì íŠ¸ í´ë” ìƒì„±
        // 2. Git ì‘ì—…
        // 3. ì„¤ì • íŒŒì¼ ìƒì„±
        // 4. ìƒˆ ì°½ ì—´ê¸°
    }

    /**
     * ê°œë³„ ì‘ì—… í•¨ìˆ˜ë“¤
     */
    private static async specificTask(): Promise<void> {
        // íŠ¹ì • ì‘ì—… ìˆ˜í–‰
    }
}
```

---

### 6. Configuration ì €ì¥ ê·œì¹™

```typescript
import { createVscodeSettings } from '../common/vscode-utils';

await createVscodeSettings(projectUri, {
    'axon.projectType': 'yocto_project' | 'mcu_project',
    'axon.yocto.projectRoot': projectPath,
    'axon.yocto.isAutolinux': true,
    // í”„ë¡œì íŠ¸ë³„ ì„¤ì •...
});
```

---

### 7. ë¡œê¹… ê·œì¹™

```typescript
import { axonLog, axonSuccess, axonError } from './logger';

axonLog('â„¹ï¸ ì •ë³´ ë©”ì‹œì§€');
axonSuccess('âœ… ì„±ê³µ ë©”ì‹œì§€');
axonError('âŒ ì—ëŸ¬ ë©”ì‹œì§€');
```

#### ì´ëª¨ì§€ ì‚¬ìš© ê°€ì´ë“œ
- ğŸ“‚ í´ë” ê´€ë ¨
- ğŸ”„ ì§„í–‰ ì¤‘
- âœ… ì™„ë£Œ
- âŒ ì—ëŸ¬
- âš ï¸ ê²½ê³ 
- ğŸ“‹ ëª©ë¡
- ğŸ”§ ì„¤ì •/êµ¬ì„±
- ğŸ“¦ íŒ¨í‚¤ì§€/SDK
- ğŸŒ ì›ê²©/ë„¤íŠ¸ì›Œí¬
- ğŸ”— ë§í¬/ì—°ê²°

---

### 8. ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

```typescript
try {
    // ì‘ì—… ìˆ˜í–‰
    axonLog('ğŸ”„ ì‘ì—… ì‹œì‘...');
    await someTask();
    axonSuccess('âœ… ì‘ì—… ì™„ë£Œ');
} catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    axonError(`âŒ ì‘ì—… ì‹¤íŒ¨: ${errorMessage}`);
    
    // WebViewì— ì—ëŸ¬ ì „ë‹¬
    panel.webview.postMessage({
        command: 'taskError',
        error: errorMessage
    });
    
    throw error;  // ë˜ëŠ” ì ì ˆí•œ ì²˜ë¦¬
}
```

---

### 9. ëª…ë ¹ì–´ ë“±ë¡ íŒ¨í„´

```typescript
// extension.ts
const commandDisposable = vscode.commands.registerCommand(
    'axon.commandName',
    async (arg1?: type1, arg2?: type2) => {
        await SomeClass.someMethod(arg1, arg2);
    }
);

context.subscriptions.push(commandDisposable);
```

---

### 10. ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

```bash
# ê°œë°œ ì¤‘
npm run compile

# íŒ¨í‚¤ì§•
npm run package

# íŒŒì¼ ë³µì‚¬ (ìë™)
npm run copy-webview
```

#### ì»´íŒŒì¼ í›„ í™•ì¸ ì‚¬í•­
- `out/` ë””ë ‰í† ë¦¬ ìƒì„±
- `out/webview/` ì— HTML/CSS/JS íŒŒì¼ ë³µì‚¬
- linter ì˜¤ë¥˜ ì—†ìŒ

---

### 11. ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ê¸°ë³¸ ì‚¬í•­
- [ ] Python 3.6 í˜¸í™˜ì„± í™•ì¸
- [ ] ì›ê²© í™˜ê²½(WSL/SSH) ì§€ì›
- [ ] `vscode.Uri` ì‚¬ìš© (Node.js fs ëŒ€ì‹ )
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ
- [ ] ë¡œê¹… ì¶”ê°€

#### WebView ê´€ë ¨
- [ ] CSP ì„¤ì •
- [ ] ë©”ì‹œì§€ í•¸ë“¤ë§ ì™„ë£Œ
- [ ] ê²€ì¦ ë¡œì§ ì¶”ê°€
- [ ] ìƒíƒœ ê´€ë¦¬ êµ¬í˜„

#### TypeScript
- [ ] íƒ€ì… ì •ì˜ ì™„ë£Œ
- [ ] JSDoc ì£¼ì„ ì¶”ê°€
- [ ] linter ì˜¤ë¥˜ ì—†ìŒ
- [ ] ì»´íŒŒì¼ ì„±ê³µ

---

### 12. ë¬¸ì„œí™” ê·œì¹™

#### ì½”ë“œ ì£¼ì„
   ```typescript
   /**
    * í•¨ìˆ˜ ì„¤ëª…
    * 
    * @param param1 - íŒŒë¼ë¯¸í„° ì„¤ëª…
    * @returns ë°˜í™˜ê°’ ì„¤ëª…
    */
   ```

#### ë³µì¡í•œ ë¡œì§ì€ ë‹¨ê³„ë³„ ì£¼ì„
   ```typescript
   // 1. í”„ë¡œì íŠ¸ í´ë” ìƒì„±
   // 2. Git clone ì‹¤í–‰
   // 3. Configuration ì‹¤í–‰
   ```

---

### 13. í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

1. **F5**ë¡œ Extension Development Host ì‹¤í–‰
2. Axon ì‚¬ì´ë“œë°” ì—´ê¸°
3. ê° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
4. í„°ë¯¸ë„ ì¶œë ¥ í™•ì¸
5. settings.json í™•ì¸
6. ì›ê²© í™˜ê²½ í…ŒìŠ¤íŠ¸ (WSL/SSH)

---

### 14. ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

#### í”„ë¡œì íŠ¸ ê²½ë¡œ ì²˜ë¦¬
```typescript
const projectFullUri = vscode.Uri.joinPath(projectUri, projectName);
const projectPath = projectFullUri.scheme === 'file'
    ? projectFullUri.fsPath
    : projectFullUri.path;
```

#### ì‰˜ ëª…ë ¹ ì‹¤í–‰
```typescript
await executeShellTask({
    command: `cd ${path} && ./script.sh`,
    cwd: workingDirectory,
    taskName: 'Task Display Name',
    taskId: 'uniqueTaskId',
    showTerminal: true
});
```

#### íŒŒì¼ ì½ê¸° (ì›ê²© ì§€ì›)
```typescript
const fileUri = vscode.Uri.file(filePath);
const content = await vscode.workspace.fs.readFile(fileUri);
const text = Buffer.from(content).toString('utf8');
```

#### ë””ë ‰í† ë¦¬ ëª©ë¡
```typescript
const dirUri = vscode.Uri.file(dirPath);
const entries = await vscode.workspace.fs.readDirectory(dirUri);
const files = entries
    .filter(([name, type]) => type === vscode.FileType.File)
    .map(([name]) => name);
```

---

## ğŸ“ ì‘ì—… ì‹œì‘ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

1. [ ] Python 3.6 í˜¸í™˜ì„± í™•ì¸
2. [ ] ì›ê²© í™˜ê²½ ì§€ì› í™•ì¸
3. [ ] ê¸°ì¡´ ì½”ë“œ íŒ¨í„´ ì°¸ê³ 
4. [ ] íŒŒì¼ êµ¬ì¡° ê·œì¹™ ì¤€ìˆ˜
5. [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
6. [ ] ë¡œê¹… ì¶”ê°€
7. [ ] ë¬¸ì„œí™” ì¤€ë¹„

---

## ğŸ”§ ìœ ìš©í•œ VSCode API

```typescript
// í´ë” ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
vscode.window.showOpenDialog({
    canSelectFiles: false,
    canSelectFolders: true,
    canSelectMany: false
});

// QuickPick ì„ íƒ
vscode.window.showQuickPick(items, {
    placeHolder: 'Select an item'
});

// ì…ë ¥ ìƒì
vscode.window.showInputBox({
    prompt: 'Enter value',
    placeHolder: 'placeholder'
});

// ë©”ì‹œì§€ í‘œì‹œ
vscode.window.showInformationMessage('Info');
vscode.window.showWarningMessage('Warning');
vscode.window.showErrorMessage('Error');

// ìƒˆ í´ë” ì—´ê¸°
vscode.commands.executeCommand('vscode.openFolder', uri, { 
    forceNewWindow: true 
});
```

---

## ğŸ¨ UI ë””ìì¸ ê°€ì´ë“œ

### ìƒ‰ìƒ (VSCode í…Œë§ˆ ë³€ìˆ˜ ì‚¬ìš©)
- `var(--vscode-foreground)`
- `var(--vscode-input-background)`
- `var(--vscode-button-background)`
- `var(--vscode-focusBorder)`

### ê°„ê²©
- ì‘ì€ ê°„ê²©: `8px`
- ì¤‘ê°„ ê°„ê²©: `16px`
- í° ê°„ê²©: `24px`

### ë²„íŠ¼ ìŠ¤íƒ€ì¼
```css
button {
    padding: 8px 14px;
    background: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
    border: none;
    cursor: pointer;
}
```

---

## âœ… êµ¬í˜„ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

1. [ ] ì»´íŒŒì¼ ì„±ê³µ
2. [ ] Linter ì˜¤ë¥˜ ì—†ìŒ
3. [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ
4. [ ] **êµ¬í˜„ì‚¬í•­.mdì— êµ¬í˜„ ë‚´ìš© ê¸°ì…** â¬… í•„ìˆ˜!
5. [ ] ì»¤ë°‹ ë©”ì‹œì§€ ì‘ì„± (`.commit_template.md` ì°¸ê³ )

---

**ì´ ì§€ì¹¨ì„ ë”°ë¼ ì¼ê´€ëœ ì½”ë“œ í’ˆì§ˆì„ ìœ ì§€í•˜ì„¸ìš”!** ğŸš€

