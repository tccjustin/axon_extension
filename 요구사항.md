요구사항
--------

2025-11-28
----------
✅ 완료 - 09:56 
가독성을 위해서.. 
@builder.ts (844-859) 이런식으로 command 처리했는데,,  buildKernel, buildAp 함수도 그렇게 바꿔줘..

buildAp, buildMcu, buildKernel 모두 템플릿 리터럴 형태로 변경 완료:
- getBuildCommands가 문자열 반환하도록 인터페이스 수정
- 공통 함수에서 모든 빌드 타입을 동일하게 처리
- AP/MCU/Kernel 모두 fullCommand 템플릿 리터럴 형태로 통일


✅ 완료 - 09:55
가독성을 위해서.. 
@builder.ts (844-859) 이런식으로 command 처리해줘..

cleanApBuild, cleanMcuBuild, cleanAllBuild 함수의 getCleanCommand를
배열 join(' && ') 형태에서 멀티라인 템플릿 리터럴 형태로 변경 완료

✅ 완료 - 09:41
project/yocto/builder.ts에도.. buildAp(), buildMcu(), buildKernel(), cleanApBuild(), cleanMcuBuild(), cleanAllBuild() 이것도 공토함수를 만들고.. 그것을 사용하는 구조로 해줘..
아까 mcu쪽 수정했던 것 참고해서..

Yocto builder 리팩토링 완료:
- YoctoBuildTaskConfig, YoctoCleanTaskConfig 인터페이스 정의
- executeYoctoBuildTask, executeYoctoCleanTask 공통 함수 생성
- buildAp, buildMcu, buildKernel → 공통 빌드 함수 사용
- cleanApBuild, cleanMcuBuild, cleanAllBuild → 공통 클린 함수 사용
- 코드 중복 대폭 감소 (약 600줄 → 200줄)
- Linter 오류 없음 

✅ 완료 - 09:34
mcu build는 project/mcu/ 폴더의 builder.ts로 이동하는 것이 좋을 것 같은데.. 

✅ 완료 - 09:24
executeMcuTask에서도.. 
yocto의 @builder.ts (923-938) 처럼..  command 인자를 전달했으면 해.. 

✅ 완료 - 09:19
executeMcuTask 함수는 진짜로 공통적인 부분만 있어야 할 것 같은데.... 

@extension.ts (1184-1252)  @extension.ts (1135-1152) 는　공통적인　부분은　아닌　것　같아．．
이것을　호출하는　곳에서　인자로써　전달해야　할　것　같어．　

✅ 완료 - 08:56
executeMcuClean, executeMcuBuildAll, executeMcuBuildMake 이 함수 세개는 거의 비슷해 보이는데..
리팩토링을 해야 할 것 같은데..

✅ 완료 - mcu build를 project/mcu/builder.ts로 이동
MCU build 관련 코드를 projects/mcu/builder.ts의 McuProjectBuilder 클래스로 이동 완료:
- executeMcuTask → McuProjectBuilder.executeMcuTask (private)
- executeMcuBuildMake → McuProjectBuilder.buildMake
- executeMcuBuildAll → McuProjectBuilder.buildAll
- executeMcuClean → McuProjectBuilder.cleanBuild
- 폴더 검색 함수들도 모두 이동
- extension.ts는 이제 McuProjectBuilder를 import하여 사용

완료했습니다! ✅ 세 함수를 리팩토링하여 코드 중복을 제거했습니다.

## 변경 사항:

### 리팩토링 결과:

* 이전: 270줄 (3개 함수, 각 90줄씩)
* 이후: 약 180줄 (1개 공통 함수 + 3개 래퍼 함수)
* 코드 감소: 약 90줄 (~33% 감소)

### 구조:

1. executeMcuTask(config) - 공통 로직을 처리하는 핵심 함수

* 인터페이스 McuTaskConfig로 작업 타입 정의
* 모든 공통 부분 통합:
* 환경 정보 로깅
* 빌드 폴더 검색
* 사용자 확인
* 명령 실행
* 에러 처리
* 작업별 차이점만 분기 처리

1. 래퍼 함수들 - 기존 인터페이스 유지

* executeMcuBuildMake() → executeMcuTask({ taskType: 'build', core })
* executeMcuBuildAll() → executeMcuTask({ taskType: 'buildAll' })
* executeMcuClean() → executeMcuTask({ taskType: 'clean' })

### 장점:

* ✅ 코드 중복 제거
* ✅ 유지보수성 향상 (한 곳만 수정하면 됨)
* ✅ 기존 함수 시그니처 유지 (호환성 보장)
* ✅ 타입 안전성 (TypeScript interface 사용)
* ✅ 확장성 향상 (새로운 작업 타입 추가 용이)

8:00

Build <인자>가 선택되면.. 인자가 executeMcuBuildMake 함수에 전달되어야 해..
이를테면 Build m7-np가 선택되면.. m7-np 라는 인자가 executeMcuBuildMake 함수에 전달되어야 해..

그리고, 최종 실행 커맨드는
make tcn100x_<인자>_defconfig && make
이를테면..
make tcn100x_m7-np_defconfig 이어야 해.

7:01
⏱️ [PERF] state-restore: 0.10ms
axon-sidebar.js:12 ⏱️ [PERF] event-delegation-setup: 0.00ms
axon-sidebar.js:12 ⏱️ [PERF] dom-ready: 0.00ms
axon-sidebar.js:24
📊 ============ Performance Report ============
axon-sidebar.js:25 🎯 Total Loading Time: 3.30ms
axon-sidebar.js:26 📋 Breakdown:
axon-sidebar.js:32    - state-restore: 0.10ms
axon-sidebar.js:32    - dom-ready: 0.00ms
axon-sidebar.js:32    - event-delegation-setup: 0.00ms
axon-sidebar.js:35 ============================================

axon-sidebar.js:12 ⏱️ [PERF] update-state: 0.10ms
axon-sidebar.js:12 ⏱️ [PERF] update-recipes: 0.10ms

이게 결과이긴 한데..

내가 눈으로 확장 아이콘 클릭하고.. 모든 webview의 화면 구성이 완료되는데. 2~3초 걸리는 것 같은데.

6:56
알았어.. 하이브리드 비추천은 알겠어..
그럼.. 나는 로딩 속도 프로파일링을 좀 했으면 좋겠어..
네가 말하는 것처럼 50ms 인지 총 얼마나인지.
프로파일링할 수 있게 구현해줘

6:33
다른 확장을 클릭을 하고 axon 확장으로 돌아오고 로딩하는데 시간이 오래 걸리는데.. 왜지?

6:29
axon 확장에서 작업을 하고, 다른 확장을 클릭하고.. 다시 axon으로 돌아오면. 이전에 했던 상태가 유지되었으면 하는데..
무슨 뜻인지는 이해가 되나?
--------------------------

2025-11-27
----------

16:29
FWDN 메뉴를 Configuration과 Build과 동일한 레벨의 항목으로써 가장 아래에 위치하도록 해줘..

16:19

Webview가 열릴 때,, vscode가 새로 시작하거나, 다른 확자 아이콘을 클릭하고 다시 axon 확장 아이콘을 클릭 했을 때..
settings.json의 axon.devtool.recipes 의 값도 읽어와야 해..

그리고, Devtool 메뉴의 devtool Create-workspace & devtool modify <recipe>
와 레시피 선택과 실행 버튼 아래에..

devtool build <recipe>라는 글을 써주고.
settings.json의 axon.devtool.recipes의 값들을 선택하게 해주고.. 그걸 선택하면 .. build 실행되도록 만들어줘

16:13

1. Create Project에서..
   MCU Standalone Proejct 와 Yocto Proejct를 선택할 수 있게 해주고.. 옆아 아이콘을 누르면 실행되로고 해줘..

16:08

1. Devtool에서..
   create & modify도 마찬가지로.. 레시피들을 선택할 수 있는 드롭박스가 나오고.. 그 옆에.. play 버튼이 나오도록 해줘..
   선택할 수 있는 레시피는
   linux-telechips
   m7-0
   m7-1
   m7-2
   m7-np
   tpa-app
   dpi-app
   u-boot-tcc

드랍박스 위에.. devtool Create-workspcae & devtool modify <recipe> 라고 써줘

16:08

1. mcu project가 선택되었을 때.. configuration의 yocto는 안보여져야해

15:57

1. 다른 extension 아이콘을 선택했다고 axon extension 아이콘을 선택하면..
   settings.json을 읽어서, current:에 현재 project type을 표시해야 해야 함.. (지금은 그렇지 않음.)
   vscode를 새로 열때만 settings.json을 읽도록 되어 있어..

15:53

1. configuration 아래에.. set project type을 선택할 수 있는 UI를 만들어줘.. yocto_project, 또는 mcu_project
   그리고, 왼쪽에 적용 버튼을 만들어 주고, 그것을 선택하면..
   settings.json의 "axon.projectType"의 값이 바뀌도록 해줘..
   근데 적용하기 전에 팝업으로 물어봐야 해.. 진짜 바꿀껀지..
2. Webview가 열릴 때.. settings.json을 해당 값을 읽어서.. 있다면 current project type 위 선택 UI가 해당 값을 가리키도록 해줘..
   그리고, 어딘가에 current project is yocto project 라고 표시해줬으면 좋겠어..
3. 그리고, yocto project 라면. Build 메뉴 아래 mcu build 관련 항목을 보여주지 마..
4. 그리고, mcu proejct 라면, build yocto, devtool관련 항목을 보여주지마.

15:33

오.. Run Build 와 Run Clean은 재생 버튼 같은 아이콘으로 변경해줘

네, 버튼의 형태는 CSS를 통해 얼마든지 다양하게 변경할 수 있습니다. 현재 사용 중인 버튼은 VS Code의 표준 스타일을 따르고 있어 다소 평범한 직사각형 형태입니다.
공간을 더 효율적으로 쓰거나 스타일을 바꾸고 싶다면 다음과 같은 대안들이 있습니다:
아이콘 버튼 (추천): 텍스트("Run Build")를 없애고 아이콘(▶)만 표시하여 정사각형 모양으로 만듭니다. 공간을 가장 적게 차지하며 깔끔합니다. (마우스를 올리면 툴팁으로 기능 설명 가능)
원형 버튼 (Pill): 모서리를 완전히 둥글게 깎아 알약 모양으로 만듭니다.
고스트 버튼 (Ghost): 평소에는 배경색 없이 아이콘/글자만 보이다가, 마우스를 올렸을 때만 배경이 나타납니다.
현재 "상자 크기"를 줄이고 싶어 하셨으므로, 1번(아이콘 버튼) 형태로 변경하는 것이 가장 효과적일 것 같습니다.
아이콘 버튼으로 변경해드릴까요? 원하시면 바로 적용해드리겠습니다.

15:10

1. Run Build 상자 폭을 지금 보다 작게 해줘 80% 정도로.
2. Build MCU 쪽도 비슷한 컨셉으로 구현 해줘
   Build All, Build m7-0, Build m7-1, Build m7-2, Build m7-n를 선택하도록 해주고..
   Run Build를 통해 실행되도록

15:06

1. Run Build와 Run Clean의 상자 크기를 동일하게 해줘...   Run Build에 맞춰줘.
2. 그리고 상자의 모서리가 둥글게 해줘

15:00
clean AP, clean MCU, Clean ALL 도 마찬가지로 구현해줘

---

14:55
옵션 선택 하는 부분 (Build AP, Build MCU, Build, Kernel) 바로 옆에 run bulid 버튼이 생기게 해줘.. 바로 아래 말고

---

14:46
webview UI의 yocto --> build를 선택하면 Drop box 나오고..  Build AP, Build MCU, Build Kernel이 나오고
거시서 해당 아이템을 선택하고 실행하게 해줘
-------------------------------------------

에서.. inc file을 수정하는 것은..
해당 변수의 값이 ${AUTOREV}일때만 하는 것으로 해줘..

---

2025-11-27

---

13:56

devtool modify 할 때..

@extension.ts (886-890)

실행 단계:

1. devtool create-workspace (workspace가 없을 때만)
2. devtool modify
3. bbappend 파일 수정

이렇게 실행하도록 되어 있는데..
3번 과정을 아래로 대체할께..

devtool modify를 하고 나면.. external-workspace/sources/<레시피명>
이라는 폴더가 생길꺼야..

거기서 git의 가장 최근 commit id를 복사해..
그리고,

telechips-cgw-rev.inc 파일을 읽어서.
if (레피시명 = linux-telechips)
KERNEL_BRANCH_DEV_SRC = 여기에는 받아 놓은 git의 Head commit id로 설정..
else if (레시피명 = m7-0 or  m7-1 or  m7-2 or m7-np)
MCU_BRANCH_DEV = = 여기에는 받아 놓은 git의 Head commit id로 설정..
else if (레시피명 = dpi-app)
DPI_APP_BRANCH_DEV_SRC = = 여기에는 받아 놓은 git의 Head commit id로 설정..
else if (레시피명 = tpa-app)
TPA_APP_BRANCH_DEV_SRC = = 여기에는 받아 놓은 git의 Head commit id로 설정..
else if (레시피명 = u-boot-tcc)
UBOOT_BRANCH_DEV_SRC = = 여기에는 받아 놓은 git의 Head commit id로 설정..
